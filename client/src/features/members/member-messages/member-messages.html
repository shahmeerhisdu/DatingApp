<div class="flex flex-col w-full h-[60vh]">
    <div class="flex flex-col flex-grow overflow-auto">
        @for (message of messages(); track message.id) {
        <div class="chat" [class.chat-start]="!message.currentUserSender" [class.chat-end]="message.currentUserSender" >
            <div class="chat-image avatar">
                <div class="w-10 rounded-full">
                    <img alt="Image of User"
                        [src]="message.senderImageUrl" />
                        <!-- [src]="message.currentUserSender ? message.senderImageUrl : message.recipientImageUrl" /> -->
                </div>
            </div>
            <div class="chat-header">
                {{message.senderDisplayName}}
                <!-- {{message.currentUserSender ? message.senderDisplayName : message.recipientDisplayName}} -->
                <time class="text-xs opacity-50">{{message.messageSent | date:'short'}}</time>
            </div>
            <div class="chat-bubble">{{message.content}}</div>
            @if (message.currentUserSender && message.dateRead) {
                <div class="chat-footer opacity-50">Seen {{message.dateRead | timeAgo}}</div>
            }@else if (message.currentUserSender && !message.dateRead) {
                <div class="chat-footer opacity-50">Not Read</div>
            }@else {
                <div class="chat-footer opacity-50">Delivered</div>
            }
        </div>
        }
    </div>
</div>
 